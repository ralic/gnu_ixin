README for IXIN
See end for copying conditions.

* What is it?

  IXIN is an EXPERIMENTAL distribution of EXPERIMENTAL code and
  some pre-built IXIN files.  IXIN stands for "indexed texinfo".

  All code is under GPLv3+.  All (.xml) docs are under GFDL.

  [[file:spec/ixin.texi]] is The IXIN Chronicles, a document that
  defines the file format and provides related info.  There are
  various output formats, including .info, .pdf and .ixin.

  [[file:c/]] contains some simple command-line utilities to write and
  read the file format, and a proof-of-concept rendering program.

  [[file:d/]] contains the some pre-built .sxml and .ixin files.
  [[file:d/GNUmakefile]] supports "make demo" and "make demo-zow",
  among other commands.

* Who is it for?

  The intended audience is Texinfo hackers and others who wish to
  build on Texinfo, adding to it the capability of producing files
  that are:

  - arbitrarily accessible
  - runtime configurable (e.g., paragraph indentation)

  See also:
  http://mail.gnu.org/archive/html/gnu-system-discuss/
  http://mail.gnu.org/archive/html/help-texinfo/

* dependencies

  The distribution includes pre-built .sxml and .ixin files, so the
  write tool is not necessary unless you modify the source .xml, in
  which case you will need to install Mixp (http://www.nongnu.org/mixp/)
  (Guile 1.8), or fix a1-nf3-guile2 (Guile 2.x), to proceed.  Of course,
  you need to have one of those Guile versions installed, too.

  You may also need the programs makeinfo and texi2pdf if you
  plan to rebuild the spec document.  To use alternate versions
  (for example, from the Texinfo pretest releases) you can set
  environment variables MAKEINFO and TEXI2PDF and invoke make
  with the ‘--environment-overrides’ (short form ‘-e’) option.

  Lastly, the proof-of-concept rendering program requires a
  relatively modern version of Emacs.

* What needs to be done, still?

  - w/ upstream (Texinfo) hackers:
    - still missing
      - settings support in mkixin
        - detection
        - tracking
    - image snarfing (* is current choice)
      - how? -- binary, *base64
      - when? -- never, optional, *always
      - where? -- inline, *blobs + blobs-index
    - resolve ‘???’ doubts
  - make spit.el use shr.el
  - fix a1-nf3-guile2
  - (depending on viability) clean up impl

* producing SXML w/o Guile

*** findings

    The program a1-nf3-mixp produces SXML from XML, but requires Guile
    and Mixp.  The distribution includes a 90% solution that uses Perl
    module ‘Data::Stag::SxprWriter’ to convert from XML to SXML NF1 and
    Guile (NB: w/o Mixp) to convert that to NF3.

    See:
    [[file:c/a1-nf1]] (Perl)
    file:c/a1-nf3-from-nf1 (Guile)
    file:d/GNUmakefile target ‘not-quite’

    It is only 90% because the Perl module suffers some problems still
    (and the author is no Perl hacker).

*** problems

***** ‘(’ and ‘)’ gratuitously escaped

      SxprWriter adds backslash escapes for these for no good reason.

***** ‘\’ (backslash) NOT escaped

      Unfortunately, this is an omission not easily kludged around.

***** whitespace lossage

      If you "cd d && make alive.sxml-not-quite", for example, you will
      note alive.sxml-not-quite is missing whitespace on the borders
      between normal strings and sub-elements.  Look at the strings
      surrounding ‘(strong (@) "stay on")’ in both alive.sxml and
      alive.sxml-not-quite.

***** superfluous ‘quote’

      Somewhat strangely, SxprWriter creates ‘(quote (texinfo ...))’
      instead of simply ‘(texinfo ...)’.  This is kludged around in
      a1-nf3-from-nf1 in proc ‘relevant’.

***** no DTD lookup

      Perhaps this is a not-a-Perl-hacker problem, but SxprWriter does
      not seem to complain about not finding the texinfo.dtd.  Thus,
      entities defined therein, such as ‘&copyright;’ are silently
      ignored.

***** warning

      If you "cd d && ../c/a1-nf1 prob.xml", you will see the warning:

      Wide character in print at ../c/a1-nf1 line 26.

      What does that mean?  PEBKAC, most likely.

***** NF1 instead of NF3

      Perhaps SxprWriter can be configured to output NF3 directly,
      but that wasn't clear from the docs.  Plus, it's just so easy
      (a1-nf3-from-nf1) in Scheme!

*** hackers welcome

    Whoever can fix these problems should probably arrange to output NF3
    directly, thus eliminating Guile entirely.  Here's a start:

    [[file:c/SxprWriter.pm.patch]]

    That patch addresses the first two problems only.  The program
    a1-nf1 kludges around the first problem only.  The ‘2>/dev/null’ in
    [[file:d/GNUmakefile]] is likewise suboptimal.

* copying conditions

  Copyright (C) 2012, 2013 Thien-Thi Nguyen

  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.

  ________________
  Local Variables:
  mode: org
  End:
