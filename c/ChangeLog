2012-12-22  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Specify and handle LANG in META XID.

	* mkixin (rescue grab-lang!): New proc.
	(rescue): Include LANG in XID; if specified, also add to SETTINGS.

2012-12-20  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Specify and handle "image inlining".

	* mkixin: Import SRFI 13 ‘string-suffix-ci?’,
	‘(ice-9 popen)’ procs, ‘(ice-9 rdelim) read-delimited’.
	(string<-shell-command, hang!, inline-images!): New procs.
	(do-it!): Inline images before writing nodes.

2012-12-19  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Specify and handle "float sets".

	* mkixin (find-listoffloats, floating-environments): New procs.
	(do-it!): Keep track of float sets, lonely ones, too.
	(do-it! grok!): Note any floats.
	(do-it!): If there are any, output them, as well.
	* retrieve (flosets-list): New proc.
	(in): Read flosets; return them.
	(out): Take flosets.
	(out --dump): Display flosets, if any.

2012-12-19  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Break out subroutines useful for both DTS and floats.

	* mkixin (attribute-ref): New proc.
	(symbol<-attribute-ref): Use ‘attribute-ref’.
	(at-first, symbol/hyphen<-string): New procs.
	(find-printindex): Use ‘at-first’.
	(simplified): New proc.
	(document-term-sets manager keyed/simplify!): Use ‘simplified’.
	(two-phase-accumulator): New proc.
	(do-it!): Use ‘two-phase-accumulator’.
	(do-it! grok! note-summary!): New proc.
	(do-it! grok!): Use ‘note-summary!’.

2012-12-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Use ‘kids’ more.

	* mkixin (find-printindex): Use ‘kids’.

2012-12-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Move S-TREE immediately after NODE-INDEX.

	* mkixin (do-it!): Output section tree length after ‘Top’
	node identifier; output section tree after node-index.
	* retrieve (dts-list): Update.
	(in): Read section tree after reading node index;
	in rv, move ‘s-tree’ after ‘index’.
	(out): Update param order; display ‘s-tree’ after ‘index’.

2012-12-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Say "node-index" for retrieve dump output.

	* retrieve (out --dump): ...here.

2012-12-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Specify automagic conversion for old-style txi* vars.

	* mkixin (txi-vars-as-settings): New proc.
	(rescue): Use it to adjust ‘variables’, ‘settings’.

2012-12-18  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Change META last element to TOC.

	* mkixin (rescue extract-toc): New proc.
	(rescue): Use it for last element of rv.

2012-12-17  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Specify SXML ‘insertcopying’ instead of string.

	* mkixin (rescue grab/dedup-copying!): Use ‘(insertcopying (@))’.

2012-12-17  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Call the DTS name ‘name’ instead of ‘type’.

	* mkixin (document-term-sets manager): ...here, in param name.
	* retrieve (in go): Likewise.
	(out): Rename param from ‘type’ to ‘details’.

2012-12-17  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Add DTS "default font" and "inverse default font".

	* mkixin (walker/cozy): New proc.
	(document-term-sets font): New object property.
	(document-term-sets manager): Compute default font.
	(document-term-sets manager keyed/simplify!): Set entry's ‘font’.
	(document-term-sets manager merge-duplicate-terms!):
	Expand equality predicate to include ‘font’.
	(document-term-sets manager write! pp): New proc.
	(document-term-sets manager write!): Output initial form; prefix ‘-’
	for entries with "inverse default font"; omit ‘count’ from rv list.
	(document-term-sets collect-indexterm! pluck): Update returned
	proc to take ‘parent’; if the parent is ‘definitionterm’, set the
	element's ‘font’ to ‘code’.
	(document-term-sets collect-indexterm!): Use ‘walker/cozy’;
	specify a procedure that takes two args and returns the first.
	(do-it! grok!): Don't specify DTS-COUNT for ‘lonely-dts’.
	* retrieve (in go): Don't take N.
	(in go entries): Take additional arg N.
	(in go): Include cdr of initial form as car of collected dts.
	(out dump-dts): Update accordingly.

2012-12-17  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Add DTS "default font" and "inverse default font".

	* mkixin (walker/cozy): New proc.
	(document-term-sets font): New object property.
	(document-term-sets manager): Compute default font.
	(document-term-sets manager keyed/simplify!): Set entry's ‘font’.
	(document-term-sets manager merge-duplicate-terms!):
	Expand equality predicate to include ‘font’.
	(document-term-sets manager write! pp): New proc.
	(document-term-sets manager write!): Output initial form; prefix ‘-’
	for entries with "inverse default font"; omit ‘count’ from rv list.
	(document-term-sets collect-indexterm! pluck): Update returned
	proc to take ‘parent’; if the parent is ‘definitionterm’, set the
	element's ‘font’ to ‘code’.
	(document-term-sets collect-indexterm!): Use ‘walker/cozy’;
	specify a procedure that takes two args and returns the first.
	(do-it! grok!): Don't specify DTS-COUNT for ‘lonely-dts’.
	* retrieve (in go): Don't take N.
	(in go entries): Take additional arg N.
	(in go): Include cdr of initial form as car of collected dts.

2012-12-16  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Replace term "tli" with "dts".

	* mkixin (document-term-sets): Rename from ‘two-letter-indices’;
	update temp file name.
	(do-it!): Update local var names.
	* retrieve (dts-list): Rename from ‘tli-list’.
	(in): Rename local var ‘tli’ to ‘dtsi’.
	(out): Likewise; rename commands ‘list-tli’ and
	‘dump-tli’ to ‘list-dts’ and ‘dump-dts’, respectively.

2012-12-12  Thien-Thi Nguyen  <ttn@gnuvola.org>

	retrieve: Bump default byte-count to 80.

	* retrieve (main): ...here.

2012-12-11  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Release: 1.3

2012-12-11  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Explore producing SXML w/o Guile.

	* SxprWriter.pm.patch: New file.
	* a1-nf1: New file.
	* a1-nf3-from-nf1: New file.

2012-12-10  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] mkixin: Do node{name,next,prev,up} extraction in one pass.

	* mkixin (xnode!): Delete proc.
	(identify four): New list of procs.
	(identify maybe-four!): New proc.
	(identify id<-name): New proc.
	(identify): Extract ‘nodename’, ‘nodenext’, ‘nodeprev’,
	‘nodeup’ in one pass; deref names to id numbers afterwards;
	return ‘locs’ as last value instead of ‘id<-name’.
	(do-it! grok!): Take arg ‘loc’ instead of doing
	‘nodenext’, ‘nodeprev’, ‘nodeup’ extraction.
	(do-it!): Update binding form for call to ‘identify’;
	update call to ‘grok!’.

2012-12-09  Thien-Thi Nguyen  <ttn@gnuvola.org>

	retrieve: Take EOF to mean "quit" for repl.

	* retrieve (out repl loop): On EOF, do ‘quit’.

2012-12-09  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Add abstraction: walker

	* mkixin (walker): New proc.
	(find-printindex, collect-indexterm!, section-tree): Use it.

2012-12-09  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Add abstractions: symbol<-attribute-ref, kids

	* mkixin (symbol<-attribute-ref, kids): New procs.
	(find-printindex): Use ‘kids’
	(rescue, two-letter-indices): Use ‘symbol<-attribute-ref’, ‘kids’.
	(section-tree): Use ‘kids’.

2012-12-08  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Rename a2ixin to mkixin; drop .xml handling.

	* mkixin: Rename from a2ixin;
	don't import ‘(ice-9 popen)’ procs;
	don't import SRFI 13 ‘string-suffix?’.
	(how-to-handle): Assume filename has form "STEM.sxml".

2012-12-08  Thien-Thi Nguyen  <ttn@gnuvola.org>

	Omit ‘node’ from node data.

	* a2ixin (do-it! grok! stash!): Output ‘(cdr node)’, not ‘node’.
	* retrieve (out show-node-tree): Cons ‘node’ onto ‘read’ form.

2012-12-08  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[int] Update ‘dump’ / ‘dump/abbrev’ output.

	Omission from 2012-12-05, "Save nodes as SXML".

	* retrieve (out --dump): Use "~A" for node data;
	if necessary, output fake double-quote and close-parens,
	preceded by " …"; don't output "[+ N]" in case of full output.

2012-12-08  Thien-Thi Nguyen  <ttn@gnuvola.org>

	[dist] Move programs to c/, documents to d/.

	* a1-nf3-guile2: Move here from parent dir.
	* a1-nf3-mixp: Likewise.
	* a2ixin: Likewise.
	* retrieve: Likewise.
	* z-fixed-pp.scm: Likewise.
	* zomg: Likewise.


Copyright (C) 2012 Thien-Thi Nguyen

Copying and distribution of this file, with or without modification,
are permitted provided the copyright notice and this notice are preserved.
